"use strict";(()=>{registerProcessor("vumeter",class extends AudioWorkletProcessor{_volume;_updateIntervalInMS;_nextUpdateFrame;constructor(){super(),this._volume=0,this._updateIntervalInMS=25,this._nextUpdateFrame=this._updateIntervalInMS,this.port.onmessage=e=>{e.data.updateIntervalInMS&&(this._updateIntervalInMS=e.data.updateIntervalInMS)}}get intervalInFrames(){return this._updateIntervalInMS/1e3*sampleRate}process(e,l,o){let a=e[0];if(a.length>0){let t=a[0],r=0,n=0;for(let s=0;s<t.length;++s)r+=t[s]*t[s];n=Math.sqrt(r/t.length),this._volume=Math.max(n,this._volume*.8),this._nextUpdateFrame-=t.length,this._nextUpdateFrame<0&&(this._nextUpdateFrame+=this.intervalInFrames,this.port.postMessage({volume:this._volume}))}return!0}});})();
